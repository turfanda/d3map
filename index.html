<!DOCTYPE html>
<meta charset="utf-8">
<style>
    body {
        text-align: center;
        margin-top: 50px;
    }

    .country {
        fill: #cccccc;
        stroke: white;
        stroke-width: 0.5;
    }
</style>

<body>
    <svg width="1200" height="800"></svg>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script>
        var svg = d3.select("svg");

        var g = svg.append("g");


        var width = svg.attr("width");
        var height = svg.attr("height");

        var projection = d3.geoMercator().translate([width / 2, height / 2]).scale(200);
        var path = d3.geoPath().projection(projection);

       var div = d3.select("body").append("div")
      .attr("class", "infoBox");


        d3.queue()
            .defer(d3.json, "https://unpkg.com/world-atlas@1/world/50m.json")
            .defer(d3.json, "https://raw.githubusercontent.com/FreeCodeCamp/ProjectReferenceData/master/meteorite-strike-data.json")
            .await(ready)



        function ready(err, map, meteor) {
            if (err) throw err;


            var countries = topojson.feature(map, map.objects.countries).features;
            g.append("g")
                .selectAll(".country")
                .data(countries)
                .enter().append("path")
                .attr("class", "country")
                .attr("d", path);

            g.append("g")
                .selectAll(".meteor")
                .data(meteor.features)
                .enter().append("circle")
                .attr("r", function(d) {
                    return 1;
                })
                .attr("cx", function(d) {
                    if (d.geometry != null) {
                        var coord = projection([d.geometry.coordinates[0], d.geometry.coordinates[1]]);
                        return coord[0];
                    } else {
                        return 10;
                    }
                })
                .attr("cy", function(d) {
                    if (d.geometry != null) {
                        var coord = projection([d.geometry.coordinates[0], d.geometry.coordinates[1]]);
                        return coord[1];
                    } else {
                        return 10;
                    }
                }).on("mouseover",function(d){
            
            })

            function zoomed() {
                g.attr("transform", d3.event.transform);
                d3.selectAll(".country").style("stroke-width", 1.5 / d3.event.transform.k + "px");
            }

            var zm = d3.zoom().on("zoom", zoomed);

            zm(svg);


        }
    </script>

</body>