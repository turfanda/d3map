<!DOCTYPE html>
<meta charset="utf-8">
<style>
    body {
        text-align: center;
    }

    .country {
        fill: #cccccc;
        stroke: black;
        stroke-width: 0.5;
    }
</style>

<body>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script>
     
    var svg = d3.select("body")
      .append("svg")
      .attr("width", "100%")
      .attr("height", "100%")
      .call(d3.zoom().on("zoom", function () {
              svg.attr("transform", d3.event.transform)
      }));
        var width = svg.attr("width");
        var height = svg.attr("height");

        var projection = d3.geoMercator().translate([width / 2, height / 2]).scale(100);
        var path = d3.geoPath().projection(projection);
      


        d3.queue()
            .defer(d3.json, "https://unpkg.com/world-atlas@1/world/50m.json")
            .defer(d3.json, "https://raw.githubusercontent.com/FreeCodeCamp/ProjectReferenceData/master/meteorite-strike-data.json")
            .await(ready)



        function ready(err, map, meteor) {
            if (err) throw err;

                var zm = d3.zoom()
 .scaleExtent([1, 8])
    .on("zoom", zoomed);

      svg.call(zm);
          
          var countries = topojson.feature(map, map.objects.countries).features;
            svg.append("g")
                .selectAll(".country")
                .data(countries)
                .enter().append("path")
                .attr("class", "country")
                .attr("d", path);

            svg.append("g")
                .selectAll(".meteor")
                .data(meteor.features)
                .enter().append("circle")
                .attr("r", function(d) {
                    return 1;
                })
                .attr("cx", function(d) {
                    if (d.geometry != null) {
                        var coord = projection([d.geometry.coordinates[0], d.geometry.coordinates[1]]);
                        return coord[0];
                    } else {
                        return 10;
                    }
                })
                .attr("cy", function(d) {
                    if (d.geometry != null) {
                        var coord = projection([d.geometry.coordinates[0], d.geometry.coordinates[1]]);
                        return coord[1];
                    } else {
                        return 10;
                    }
                })
          
          function zoomed() {
  svg.style("stroke-width", 1.5 / d3.event.transform.k + "px");
  svg.attr("transform",d3.event.transform); // updated for d3 v4
}

        }
    </script>

</body>